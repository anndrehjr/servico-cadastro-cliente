{"ast":null,"code":"var _jsxFileName = \"C:\\\\xampp\\\\htdocs\\\\sistema-cadastro-cliente\\\\frontend\\\\src\\\\pages\\\\UserManagement.js\",\n  _s = $RefreshSig$();\nimport { useState, useEffect } from \"react\";\nimport Navbar from \"../components/Navbar\";\nimport UserList from \"../components/UserList\";\nimport UserModal from \"../components/UserModal\";\nimport \"./UserManagement.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction UserManagement() {\n  _s();\n  const BASE_URL = \"http://localhost/sistema-cadastro-cliente/backend\";\n  const [users, setUsers] = useState([]);\n  const [filteredUsers, setFilteredUsers] = useState([]);\n  const [selectedUser, setSelectedUser] = useState(null);\n  const [isModalOpen, setIsModalOpen] = useState(false);\n  const [searchTerm, setSearchTerm] = useState(\"\");\n  useEffect(() => {\n    fetchUsers();\n  }, []);\n  const fetchUsers = async () => {\n    try {\n      const response = await fetch(`${BASE_URL}/listar.php`);\n      if (!response.ok) throw new Error(\"Erro ao carregar usuários\");\n      const data = await response.json();\n      if (data.success) {\n        setUsers(data.data);\n        setFilteredUsers(data.data);\n      }\n    } catch (error) {\n      console.error(\"Erro ao buscar usuários:\", error);\n      alert(\"Erro ao carregar usuários. Por favor, tente novamente.\");\n    }\n  };\n  const handleSearch = term => {\n    setSearchTerm(term);\n    const filtered = users.filter(user => user.nome.toLowerCase().includes(term.toLowerCase()) || user.cpf.includes(term) || user.telefone.includes(term));\n    setFilteredUsers(filtered);\n  };\n  const handleUserSelect = user => {\n    setSelectedUser(user);\n    setIsModalOpen(true);\n  };\n  const handleCloseModal = () => {\n    setIsModalOpen(false);\n    setSelectedUser(null);\n  };\n  const handleSaveUser = async updatedUser => {\n    try {\n      const response = await fetch(`${BASE_URL}/atualizar.php`, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          id: updatedUser.id,\n          nome: updatedUser.nome,\n          email: updatedUser.email,\n          cpf: updatedUser.cpf,\n          data_nascimento: updatedUser.data_nascimento,\n          telefone: updatedUser.telefone,\n          endereco: updatedUser.endereco,\n          cidade: updatedUser.cidade,\n          estado: updatedUser.estado\n        })\n      });\n      const data = await response.json();\n      if (!response.ok) {\n        throw new Error(data.message || \"Erro ao atualizar usuário\");\n      }\n      if (data.success) {\n        // Update local state\n        const updatedUsers = users.map(user => user.id === updatedUser.id ? updatedUser : user);\n        setUsers(updatedUsers);\n        setFilteredUsers(updatedUsers);\n        handleCloseModal();\n        alert(\"Usuário atualizado com sucesso!\");\n        // Refresh the users list\n        await fetchUsers();\n      } else {\n        throw new Error(data.message || \"Erro ao atualizar usuário\");\n      }\n    } catch (error) {\n      console.error(\"Erro ao atualizar usuário:\", error);\n      alert(error.message || \"Erro ao atualizar usuário. Por favor, tente novamente.\");\n    }\n  };\n  const handleDeleteUser = async userId => {\n    try {\n      const response = await fetch(`${BASE_URL}/excluir.php`, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          id: userId\n        })\n      });\n      const data = await response.json();\n      if (!response.ok) {\n        throw new Error(data.message || \"Erro ao excluir usuário\");\n      }\n      if (data.success) {\n        // Update local state\n        const updatedUsers = users.filter(user => user.id !== userId);\n        setUsers(updatedUsers);\n        setFilteredUsers(updatedUsers);\n        handleCloseModal();\n        alert(\"Usuário excluído com sucesso!\");\n        // Refresh the users list\n        await fetchUsers();\n      } else {\n        throw new Error(data.message || \"Erro ao excluir usuário\");\n      }\n    } catch (error) {\n      console.error(\"Erro ao excluir usuário:\", error);\n      alert(error.message || \"Erro ao excluir usuário. Por favor, tente novamente.\");\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"user-management\",\n    children: [/*#__PURE__*/_jsxDEV(Navbar, {\n      onSearch: handleSearch\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n      className: \"main-content\",\n      children: [/*#__PURE__*/_jsxDEV(UserList, {\n        users: filteredUsers,\n        onUserSelect: handleUserSelect\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 9\n      }, this), isModalOpen && selectedUser && /*#__PURE__*/_jsxDEV(UserModal, {\n        user: selectedUser,\n        onClose: handleCloseModal,\n        onSave: handleSaveUser,\n        onDelete: handleDeleteUser\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 133,\n    columnNumber: 5\n  }, this);\n}\n_s(UserManagement, \"DAUAeqCfm7KIujK/a7RCWNocj9s=\");\n_c = UserManagement;\nexport default UserManagement;\nvar _c;\n$RefreshReg$(_c, \"UserManagement\");","map":{"version":3,"names":["useState","useEffect","Navbar","UserList","UserModal","jsxDEV","_jsxDEV","UserManagement","_s","BASE_URL","users","setUsers","filteredUsers","setFilteredUsers","selectedUser","setSelectedUser","isModalOpen","setIsModalOpen","searchTerm","setSearchTerm","fetchUsers","response","fetch","ok","Error","data","json","success","error","console","alert","handleSearch","term","filtered","filter","user","nome","toLowerCase","includes","cpf","telefone","handleUserSelect","handleCloseModal","handleSaveUser","updatedUser","method","headers","body","JSON","stringify","id","email","data_nascimento","endereco","cidade","estado","message","updatedUsers","map","handleDeleteUser","userId","className","children","onSearch","fileName","_jsxFileName","lineNumber","columnNumber","onUserSelect","onClose","onSave","onDelete","_c","$RefreshReg$"],"sources":["C:/xampp/htdocs/sistema-cadastro-cliente/frontend/src/pages/UserManagement.js"],"sourcesContent":["import { useState, useEffect } from \"react\"\nimport Navbar from \"../components/Navbar\"\nimport UserList from \"../components/UserList\"\nimport UserModal from \"../components/UserModal\"\nimport \"./UserManagement.css\"\n\nfunction UserManagement() {\n  const BASE_URL = \"http://localhost/sistema-cadastro-cliente/backend\"\n\n  const [users, setUsers] = useState([])\n  const [filteredUsers, setFilteredUsers] = useState([])\n  const [selectedUser, setSelectedUser] = useState(null)\n  const [isModalOpen, setIsModalOpen] = useState(false)\n  const [searchTerm, setSearchTerm] = useState(\"\")\n\n  useEffect(() => {\n    fetchUsers()\n  }, [])\n\n  const fetchUsers = async () => {\n    try {\n      const response = await fetch(`${BASE_URL}/listar.php`)\n      if (!response.ok) throw new Error(\"Erro ao carregar usuários\")\n      const data = await response.json()\n      if (data.success) {\n        setUsers(data.data)\n        setFilteredUsers(data.data)\n      }\n    } catch (error) {\n      console.error(\"Erro ao buscar usuários:\", error)\n      alert(\"Erro ao carregar usuários. Por favor, tente novamente.\")\n    }\n  }\n\n  const handleSearch = (term) => {\n    setSearchTerm(term)\n    const filtered = users.filter(\n      (user) =>\n        user.nome.toLowerCase().includes(term.toLowerCase()) || user.cpf.includes(term) || user.telefone.includes(term),\n    )\n    setFilteredUsers(filtered)\n  }\n\n  const handleUserSelect = (user) => {\n    setSelectedUser(user)\n    setIsModalOpen(true)\n  }\n\n  const handleCloseModal = () => {\n    setIsModalOpen(false)\n    setSelectedUser(null)\n  }\n\n  const handleSaveUser = async (updatedUser) => {\n    try {\n      const response = await fetch(`${BASE_URL}/atualizar.php`, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify({\n          id: updatedUser.id,\n          nome: updatedUser.nome,\n          email: updatedUser.email,\n          cpf: updatedUser.cpf,\n          data_nascimento: updatedUser.data_nascimento,\n          telefone: updatedUser.telefone,\n          endereco: updatedUser.endereco,\n          cidade: updatedUser.cidade,\n          estado: updatedUser.estado,\n        }),\n      })\n\n      const data = await response.json()\n\n      if (!response.ok) {\n        throw new Error(data.message || \"Erro ao atualizar usuário\")\n      }\n\n      if (data.success) {\n        // Update local state\n        const updatedUsers = users.map((user) => (user.id === updatedUser.id ? updatedUser : user))\n        setUsers(updatedUsers)\n        setFilteredUsers(updatedUsers)\n        handleCloseModal()\n        alert(\"Usuário atualizado com sucesso!\")\n        // Refresh the users list\n        await fetchUsers()\n      } else {\n        throw new Error(data.message || \"Erro ao atualizar usuário\")\n      }\n    } catch (error) {\n      console.error(\"Erro ao atualizar usuário:\", error)\n      alert(error.message || \"Erro ao atualizar usuário. Por favor, tente novamente.\")\n    }\n  }\n\n  const handleDeleteUser = async (userId) => {\n    try {\n      const response = await fetch(`${BASE_URL}/excluir.php`, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify({ id: userId }),\n      })\n\n      const data = await response.json()\n\n      if (!response.ok) {\n        throw new Error(data.message || \"Erro ao excluir usuário\")\n      }\n\n      if (data.success) {\n        // Update local state\n        const updatedUsers = users.filter((user) => user.id !== userId)\n        setUsers(updatedUsers)\n        setFilteredUsers(updatedUsers)\n        handleCloseModal()\n        alert(\"Usuário excluído com sucesso!\")\n        // Refresh the users list\n        await fetchUsers()\n      } else {\n        throw new Error(data.message || \"Erro ao excluir usuário\")\n      }\n    } catch (error) {\n      console.error(\"Erro ao excluir usuário:\", error)\n      alert(error.message || \"Erro ao excluir usuário. Por favor, tente novamente.\")\n    }\n  }\n\n  return (\n    <div className=\"user-management\">\n      <Navbar onSearch={handleSearch} />\n      <main className=\"main-content\">\n        <UserList users={filteredUsers} onUserSelect={handleUserSelect} />\n        {isModalOpen && selectedUser && (\n          <UserModal\n            user={selectedUser}\n            onClose={handleCloseModal}\n            onSave={handleSaveUser}\n            onDelete={handleDeleteUser}\n          />\n        )}\n      </main>\n    </div>\n  )\n}\n\nexport default UserManagement\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}