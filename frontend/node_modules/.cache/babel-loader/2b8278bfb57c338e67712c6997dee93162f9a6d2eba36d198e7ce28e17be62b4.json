{"ast":null,"code":"var _jsxFileName = \"C:\\\\xampp\\\\htdocs\\\\sistema-cadastro-cliente\\\\frontend\\\\src\\\\pages\\\\UserManagement.js\",\n  _s = $RefreshSig$();\nimport { useState, useEffect } from \"react\";\nimport Navbar from \"../components/Navbar\";\nimport UserList from \"../components/UserList\";\nimport UserModal from \"../components/UserModal\";\nimport \"./UserManagement.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction UserManagement() {\n  _s();\n  const [users, setUsers] = useState([]);\n  const [filteredUsers, setFilteredUsers] = useState([]);\n  const [selectedUser, setSelectedUser] = useState(null);\n  const [isModalOpen, setIsModalOpen] = useState(false);\n  const [searchTerm, setSearchTerm] = useState(\"\");\n  useEffect(() => {\n    fetchUsers();\n  }, []);\n  const fetchUsers = async () => {\n    try {\n      const response = await fetch(\"http://localhost/sistema-cadastro-cliente/backend/listar\");\n      if (!response.ok) throw new Error(\"Erro ao carregar usuários\");\n      const data = await response.json();\n      if (data.success) {\n        setUsers(data.data);\n        setFilteredUsers(data.data);\n      }\n    } catch (error) {\n      console.error(\"Erro ao buscar usuários:\", error);\n      alert(\"Erro ao carregar usuários. Por favor, tente novamente.\");\n    }\n  };\n  const handleSearch = term => {\n    setSearchTerm(term);\n    const filtered = users.filter(user => user.nome.toLowerCase().includes(term.toLowerCase()) || user.cpf.includes(term) || user.telefone.includes(term));\n    setFilteredUsers(filtered);\n  };\n  const handleUserSelect = user => {\n    setSelectedUser(user);\n    setIsModalOpen(true);\n  };\n  const handleCloseModal = () => {\n    setIsModalOpen(false);\n    setSelectedUser(null);\n  };\n  const handleSaveUser = async updatedUser => {\n    try {\n      const response = await fetch(\"http://localhost/sistema-cadastro-cliente/backend/atualizar\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify(updatedUser)\n      });\n      const data = await response.json();\n      if (!response.ok) {\n        throw new Error(data.message || \"Erro ao atualizar usuário\");\n      }\n      if (data.success) {\n        // Update local state\n        const updatedUsers = users.map(user => user.id === updatedUser.id ? updatedUser : user);\n        setUsers(updatedUsers);\n        setFilteredUsers(updatedUsers);\n        handleCloseModal();\n        alert(\"Usuário atualizado com sucesso!\");\n      } else {\n        throw new Error(data.message || \"Erro ao atualizar usuário\");\n      }\n    } catch (error) {\n      console.error(\"Erro ao atualizar usuário:\", error);\n      alert(error.message || \"Erro ao atualizar usuário. Por favor, tente novamente.\");\n    }\n  };\n  const handleDeleteUser = async userId => {\n    try {\n      const response = await fetch(\"http://localhost/sistema-cadastro-cliente/backend/excluir\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          id: userId\n        })\n      });\n      const data = await response.json();\n      if (!response.ok) {\n        throw new Error(data.message || \"Erro ao excluir usuário\");\n      }\n      if (data.success) {\n        // Update local state\n        const updatedUsers = users.filter(user => user.id !== userId);\n        setUsers(updatedUsers);\n        setFilteredUsers(updatedUsers);\n        handleCloseModal();\n        alert(\"Usuário excluído com sucesso!\");\n      } else {\n        throw new Error(data.message || \"Erro ao excluir usuário\");\n      }\n    } catch (error) {\n      console.error(\"Erro ao excluir usuário:\", error);\n      alert(error.message || \"Erro ao excluir usuário. Por favor, tente novamente.\");\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"user-management\",\n    children: [/*#__PURE__*/_jsxDEV(Navbar, {\n      onSearch: handleSearch\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n      className: \"main-content\",\n      children: [/*#__PURE__*/_jsxDEV(UserList, {\n        users: filteredUsers,\n        onUserSelect: handleUserSelect\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 9\n      }, this), isModalOpen && selectedUser && /*#__PURE__*/_jsxDEV(UserModal, {\n        user: selectedUser,\n        onClose: handleCloseModal,\n        onSave: handleSaveUser,\n        onDelete: handleDeleteUser\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 117,\n    columnNumber: 5\n  }, this);\n}\n_s(UserManagement, \"DAUAeqCfm7KIujK/a7RCWNocj9s=\");\n_c = UserManagement;\nexport default UserManagement;\nvar _c;\n$RefreshReg$(_c, \"UserManagement\");","map":{"version":3,"names":["useState","useEffect","Navbar","UserList","UserModal","jsxDEV","_jsxDEV","UserManagement","_s","users","setUsers","filteredUsers","setFilteredUsers","selectedUser","setSelectedUser","isModalOpen","setIsModalOpen","searchTerm","setSearchTerm","fetchUsers","response","fetch","ok","Error","data","json","success","error","console","alert","handleSearch","term","filtered","filter","user","nome","toLowerCase","includes","cpf","telefone","handleUserSelect","handleCloseModal","handleSaveUser","updatedUser","method","headers","body","JSON","stringify","message","updatedUsers","map","id","handleDeleteUser","userId","className","children","onSearch","fileName","_jsxFileName","lineNumber","columnNumber","onUserSelect","onClose","onSave","onDelete","_c","$RefreshReg$"],"sources":["C:/xampp/htdocs/sistema-cadastro-cliente/frontend/src/pages/UserManagement.js"],"sourcesContent":["import { useState, useEffect } from \"react\"\nimport Navbar from \"../components/Navbar\"\nimport UserList from \"../components/UserList\"\nimport UserModal from \"../components/UserModal\"\nimport \"./UserManagement.css\"\n\nfunction UserManagement() {\n  const [users, setUsers] = useState([])\n  const [filteredUsers, setFilteredUsers] = useState([])\n  const [selectedUser, setSelectedUser] = useState(null)\n  const [isModalOpen, setIsModalOpen] = useState(false)\n  const [searchTerm, setSearchTerm] = useState(\"\")\n\n  useEffect(() => {\n    fetchUsers()\n  }, [])\n\n  const fetchUsers = async () => {\n    try {\n      const response = await fetch(\"http://localhost/sistema-cadastro-cliente/backend/listar\")\n      if (!response.ok) throw new Error(\"Erro ao carregar usuários\")\n      const data = await response.json()\n      if (data.success) {\n        setUsers(data.data)\n        setFilteredUsers(data.data)\n      }\n    } catch (error) {\n      console.error(\"Erro ao buscar usuários:\", error)\n      alert(\"Erro ao carregar usuários. Por favor, tente novamente.\")\n    }\n  }\n\n  const handleSearch = (term) => {\n    setSearchTerm(term)\n    const filtered = users.filter(\n      (user) =>\n        user.nome.toLowerCase().includes(term.toLowerCase()) || user.cpf.includes(term) || user.telefone.includes(term),\n    )\n    setFilteredUsers(filtered)\n  }\n\n  const handleUserSelect = (user) => {\n    setSelectedUser(user)\n    setIsModalOpen(true)\n  }\n\n  const handleCloseModal = () => {\n    setIsModalOpen(false)\n    setSelectedUser(null)\n  }\n\n  const handleSaveUser = async (updatedUser) => {\n    try {\n      const response = await fetch(\"http://localhost/sistema-cadastro-cliente/backend/atualizar\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify(updatedUser),\n      })\n\n      const data = await response.json()\n\n      if (!response.ok) {\n        throw new Error(data.message || \"Erro ao atualizar usuário\")\n      }\n\n      if (data.success) {\n        // Update local state\n        const updatedUsers = users.map((user) => (user.id === updatedUser.id ? updatedUser : user))\n        setUsers(updatedUsers)\n        setFilteredUsers(updatedUsers)\n        handleCloseModal()\n        alert(\"Usuário atualizado com sucesso!\")\n      } else {\n        throw new Error(data.message || \"Erro ao atualizar usuário\")\n      }\n    } catch (error) {\n      console.error(\"Erro ao atualizar usuário:\", error)\n      alert(error.message || \"Erro ao atualizar usuário. Por favor, tente novamente.\")\n    }\n  }\n\n  const handleDeleteUser = async (userId) => {\n    try {\n      const response = await fetch(\"http://localhost/sistema-cadastro-cliente/backend/excluir\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify({ id: userId }),\n      })\n\n      const data = await response.json()\n\n      if (!response.ok) {\n        throw new Error(data.message || \"Erro ao excluir usuário\")\n      }\n\n      if (data.success) {\n        // Update local state\n        const updatedUsers = users.filter((user) => user.id !== userId)\n        setUsers(updatedUsers)\n        setFilteredUsers(updatedUsers)\n        handleCloseModal()\n        alert(\"Usuário excluído com sucesso!\")\n      } else {\n        throw new Error(data.message || \"Erro ao excluir usuário\")\n      }\n    } catch (error) {\n      console.error(\"Erro ao excluir usuário:\", error)\n      alert(error.message || \"Erro ao excluir usuário. Por favor, tente novamente.\")\n    }\n  }\n\n  return (\n    <div className=\"user-management\">\n      <Navbar onSearch={handleSearch} />\n      <main className=\"main-content\">\n        <UserList users={filteredUsers} onUserSelect={handleUserSelect} />\n        {isModalOpen && selectedUser && (\n          <UserModal\n            user={selectedUser}\n            onClose={handleCloseModal}\n            onSave={handleSaveUser}\n            onDelete={handleDeleteUser}\n          />\n        )}\n      </main>\n    </div>\n  )\n}\n\nexport default UserManagement\n\n"],"mappings":";;AAAA,SAASA,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAC3C,OAAOC,MAAM,MAAM,sBAAsB;AACzC,OAAOC,QAAQ,MAAM,wBAAwB;AAC7C,OAAOC,SAAS,MAAM,yBAAyB;AAC/C,OAAO,sBAAsB;AAAA,SAAAC,MAAA,IAAAC,OAAA;AAE7B,SAASC,cAAcA,CAAA,EAAG;EAAAC,EAAA;EACxB,MAAM,CAACC,KAAK,EAAEC,QAAQ,CAAC,GAAGV,QAAQ,CAAC,EAAE,CAAC;EACtC,MAAM,CAACW,aAAa,EAAEC,gBAAgB,CAAC,GAAGZ,QAAQ,CAAC,EAAE,CAAC;EACtD,MAAM,CAACa,YAAY,EAAEC,eAAe,CAAC,GAAGd,QAAQ,CAAC,IAAI,CAAC;EACtD,MAAM,CAACe,WAAW,EAAEC,cAAc,CAAC,GAAGhB,QAAQ,CAAC,KAAK,CAAC;EACrD,MAAM,CAACiB,UAAU,EAAEC,aAAa,CAAC,GAAGlB,QAAQ,CAAC,EAAE,CAAC;EAEhDC,SAAS,CAAC,MAAM;IACdkB,UAAU,CAAC,CAAC;EACd,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMA,UAAU,GAAG,MAAAA,CAAA,KAAY;IAC7B,IAAI;MACF,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAAC,0DAA0D,CAAC;MACxF,IAAI,CAACD,QAAQ,CAACE,EAAE,EAAE,MAAM,IAAIC,KAAK,CAAC,2BAA2B,CAAC;MAC9D,MAAMC,IAAI,GAAG,MAAMJ,QAAQ,CAACK,IAAI,CAAC,CAAC;MAClC,IAAID,IAAI,CAACE,OAAO,EAAE;QAChBhB,QAAQ,CAACc,IAAI,CAACA,IAAI,CAAC;QACnBZ,gBAAgB,CAACY,IAAI,CAACA,IAAI,CAAC;MAC7B;IACF,CAAC,CAAC,OAAOG,KAAK,EAAE;MACdC,OAAO,CAACD,KAAK,CAAC,0BAA0B,EAAEA,KAAK,CAAC;MAChDE,KAAK,CAAC,wDAAwD,CAAC;IACjE;EACF,CAAC;EAED,MAAMC,YAAY,GAAIC,IAAI,IAAK;IAC7Bb,aAAa,CAACa,IAAI,CAAC;IACnB,MAAMC,QAAQ,GAAGvB,KAAK,CAACwB,MAAM,CAC1BC,IAAI,IACHA,IAAI,CAACC,IAAI,CAACC,WAAW,CAAC,CAAC,CAACC,QAAQ,CAACN,IAAI,CAACK,WAAW,CAAC,CAAC,CAAC,IAAIF,IAAI,CAACI,GAAG,CAACD,QAAQ,CAACN,IAAI,CAAC,IAAIG,IAAI,CAACK,QAAQ,CAACF,QAAQ,CAACN,IAAI,CAClH,CAAC;IACDnB,gBAAgB,CAACoB,QAAQ,CAAC;EAC5B,CAAC;EAED,MAAMQ,gBAAgB,GAAIN,IAAI,IAAK;IACjCpB,eAAe,CAACoB,IAAI,CAAC;IACrBlB,cAAc,CAAC,IAAI,CAAC;EACtB,CAAC;EAED,MAAMyB,gBAAgB,GAAGA,CAAA,KAAM;IAC7BzB,cAAc,CAAC,KAAK,CAAC;IACrBF,eAAe,CAAC,IAAI,CAAC;EACvB,CAAC;EAED,MAAM4B,cAAc,GAAG,MAAOC,WAAW,IAAK;IAC5C,IAAI;MACF,MAAMvB,QAAQ,GAAG,MAAMC,KAAK,CAAC,6DAA6D,EAAE;QAC1FuB,MAAM,EAAE,MAAM;QACdC,OAAO,EAAE;UACP,cAAc,EAAE;QAClB,CAAC;QACDC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAACL,WAAW;MAClC,CAAC,CAAC;MAEF,MAAMnB,IAAI,GAAG,MAAMJ,QAAQ,CAACK,IAAI,CAAC,CAAC;MAElC,IAAI,CAACL,QAAQ,CAACE,EAAE,EAAE;QAChB,MAAM,IAAIC,KAAK,CAACC,IAAI,CAACyB,OAAO,IAAI,2BAA2B,CAAC;MAC9D;MAEA,IAAIzB,IAAI,CAACE,OAAO,EAAE;QAChB;QACA,MAAMwB,YAAY,GAAGzC,KAAK,CAAC0C,GAAG,CAAEjB,IAAI,IAAMA,IAAI,CAACkB,EAAE,KAAKT,WAAW,CAACS,EAAE,GAAGT,WAAW,GAAGT,IAAK,CAAC;QAC3FxB,QAAQ,CAACwC,YAAY,CAAC;QACtBtC,gBAAgB,CAACsC,YAAY,CAAC;QAC9BT,gBAAgB,CAAC,CAAC;QAClBZ,KAAK,CAAC,iCAAiC,CAAC;MAC1C,CAAC,MAAM;QACL,MAAM,IAAIN,KAAK,CAACC,IAAI,CAACyB,OAAO,IAAI,2BAA2B,CAAC;MAC9D;IACF,CAAC,CAAC,OAAOtB,KAAK,EAAE;MACdC,OAAO,CAACD,KAAK,CAAC,4BAA4B,EAAEA,KAAK,CAAC;MAClDE,KAAK,CAACF,KAAK,CAACsB,OAAO,IAAI,wDAAwD,CAAC;IAClF;EACF,CAAC;EAED,MAAMI,gBAAgB,GAAG,MAAOC,MAAM,IAAK;IACzC,IAAI;MACF,MAAMlC,QAAQ,GAAG,MAAMC,KAAK,CAAC,2DAA2D,EAAE;QACxFuB,MAAM,EAAE,MAAM;QACdC,OAAO,EAAE;UACP,cAAc,EAAE;QAClB,CAAC;QACDC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;UAAEI,EAAE,EAAEE;QAAO,CAAC;MACrC,CAAC,CAAC;MAEF,MAAM9B,IAAI,GAAG,MAAMJ,QAAQ,CAACK,IAAI,CAAC,CAAC;MAElC,IAAI,CAACL,QAAQ,CAACE,EAAE,EAAE;QAChB,MAAM,IAAIC,KAAK,CAACC,IAAI,CAACyB,OAAO,IAAI,yBAAyB,CAAC;MAC5D;MAEA,IAAIzB,IAAI,CAACE,OAAO,EAAE;QAChB;QACA,MAAMwB,YAAY,GAAGzC,KAAK,CAACwB,MAAM,CAAEC,IAAI,IAAKA,IAAI,CAACkB,EAAE,KAAKE,MAAM,CAAC;QAC/D5C,QAAQ,CAACwC,YAAY,CAAC;QACtBtC,gBAAgB,CAACsC,YAAY,CAAC;QAC9BT,gBAAgB,CAAC,CAAC;QAClBZ,KAAK,CAAC,+BAA+B,CAAC;MACxC,CAAC,MAAM;QACL,MAAM,IAAIN,KAAK,CAACC,IAAI,CAACyB,OAAO,IAAI,yBAAyB,CAAC;MAC5D;IACF,CAAC,CAAC,OAAOtB,KAAK,EAAE;MACdC,OAAO,CAACD,KAAK,CAAC,0BAA0B,EAAEA,KAAK,CAAC;MAChDE,KAAK,CAACF,KAAK,CAACsB,OAAO,IAAI,sDAAsD,CAAC;IAChF;EACF,CAAC;EAED,oBACE3C,OAAA;IAAKiD,SAAS,EAAC,iBAAiB;IAAAC,QAAA,gBAC9BlD,OAAA,CAACJ,MAAM;MAACuD,QAAQ,EAAE3B;IAAa;MAAA4B,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC,eAClCvD,OAAA;MAAMiD,SAAS,EAAC,cAAc;MAAAC,QAAA,gBAC5BlD,OAAA,CAACH,QAAQ;QAACM,KAAK,EAAEE,aAAc;QAACmD,YAAY,EAAEtB;MAAiB;QAAAkB,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC,EACjE9C,WAAW,IAAIF,YAAY,iBAC1BP,OAAA,CAACF,SAAS;QACR8B,IAAI,EAAErB,YAAa;QACnBkD,OAAO,EAAEtB,gBAAiB;QAC1BuB,MAAM,EAAEtB,cAAe;QACvBuB,QAAQ,EAAEZ;MAAiB;QAAAK,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAC5B,CACF;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACG,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACJ,CAAC;AAEV;AAACrD,EAAA,CA7HQD,cAAc;AAAA2D,EAAA,GAAd3D,cAAc;AA+HvB,eAAeA,cAAc;AAAA,IAAA2D,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}