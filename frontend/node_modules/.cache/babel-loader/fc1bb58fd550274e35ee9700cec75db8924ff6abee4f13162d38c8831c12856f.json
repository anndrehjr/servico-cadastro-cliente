{"ast":null,"code":"var _jsxFileName = \"C:\\\\xampp\\\\htdocs\\\\sistema-cadastro-cliente\\\\frontend\\\\src\\\\pages\\\\UserManagement.js\",\n  _s = $RefreshSig$();\nimport { useState, useEffect } from \"react\";\nimport Navbar from \"../components/Navbar\";\nimport UserList from \"../components/UserList\";\nimport UserModal from \"../components/UserModal\";\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction UserManagement() {\n  _s();\n  const [users, setUsers] = useState([]);\n  const [filteredUsers, setFilteredUsers] = useState([]);\n  const [selectedUser, setSelectedUser] = useState(null);\n  const [isModalOpen, setIsModalOpen] = useState(false);\n  const [searchTerm, setSearchTerm] = useState(\"\");\n  useEffect(() => {\n    fetchUsers();\n  }, []);\n  const fetchUsers = async () => {\n    try {\n      const response = await fetch(\"http://localhost/sistema-cadastro-cliente/backend/listar\");\n      if (!response.ok) throw new Error(\"Erro ao carregar usuários\");\n      const data = await response.json();\n      setUsers(data.data);\n      setFilteredUsers(data.data);\n    } catch (error) {\n      console.error(\"Erro ao buscar usuários:\", error);\n    }\n  };\n  const handleSearch = term => {\n    setSearchTerm(term);\n    const filtered = users.filter(user => user.nome.toLowerCase().includes(term.toLowerCase()) || user.cpf.includes(term) || user.telefone.includes(term));\n    setFilteredUsers(filtered);\n  };\n  const handleUserSelect = user => {\n    setSelectedUser(user);\n    setIsModalOpen(true);\n  };\n  const handleCloseModal = () => {\n    setIsModalOpen(false);\n    setSelectedUser(null);\n  };\n  const handleSaveUser = async updatedUser => {\n    try {\n      const response = await fetch(`http://localhost/sistema-cadastro-cliente/backend/atualizar`, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify(updatedUser)\n      });\n      if (!response.ok) throw new Error(\"Erro ao atualizar usuário\");\n      const data = await response.json();\n      if (data.success) {\n        setUsers(users.map(user => user.id === updatedUser.id ? updatedUser : user));\n        setFilteredUsers(filteredUsers.map(user => user.id === updatedUser.id ? updatedUser : user));\n        handleCloseModal();\n      }\n    } catch (error) {\n      console.error(\"Erro ao atualizar usuário:\", error);\n    }\n  };\n  const handleDeleteUser = async userId => {\n    try {\n      const response = await fetch(`http://localhost/sistema-cadastro-cliente/backend/excluir`, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          id: userId\n        })\n      });\n      if (!response.ok) throw new Error(\"Erro ao excluir usuário\");\n      const data = await response.json();\n      if (data.success) {\n        setUsers(users.filter(user => user.id !== userId));\n        setFilteredUsers(filteredUsers.filter(user => user.id !== userId));\n        handleCloseModal();\n      }\n    } catch (error) {\n      console.error(\"Erro ao excluir usuário:\", error);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"user-management\",\n    children: [/*#__PURE__*/_jsxDEV(Navbar, {\n      onSearch: handleSearch\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n      className: \"main-content\",\n      children: [/*#__PURE__*/_jsxDEV(UserList, {\n        users: filteredUsers,\n        onUserSelect: handleUserSelect\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 9\n      }, this), isModalOpen && /*#__PURE__*/_jsxDEV(UserModal, {\n        user: selectedUser,\n        onClose: handleCloseModal,\n        onSave: handleSaveUser,\n        onDelete: handleDeleteUser\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 92,\n    columnNumber: 5\n  }, this);\n}\n_s(UserManagement, \"DAUAeqCfm7KIujK/a7RCWNocj9s=\");\n_c = UserManagement;\nexport default UserManagement;\nvar _c;\n$RefreshReg$(_c, \"UserManagement\");","map":{"version":3,"names":["useState","useEffect","Navbar","UserList","UserModal","FontAwesomeIcon","jsxDEV","_jsxDEV","UserManagement","_s","users","setUsers","filteredUsers","setFilteredUsers","selectedUser","setSelectedUser","isModalOpen","setIsModalOpen","searchTerm","setSearchTerm","fetchUsers","response","fetch","ok","Error","data","json","error","console","handleSearch","term","filtered","filter","user","nome","toLowerCase","includes","cpf","telefone","handleUserSelect","handleCloseModal","handleSaveUser","updatedUser","method","headers","body","JSON","stringify","success","map","id","handleDeleteUser","userId","className","children","onSearch","fileName","_jsxFileName","lineNumber","columnNumber","onUserSelect","onClose","onSave","onDelete","_c","$RefreshReg$"],"sources":["C:/xampp/htdocs/sistema-cadastro-cliente/frontend/src/pages/UserManagement.js"],"sourcesContent":["import { useState, useEffect } from \"react\"\nimport Navbar from \"../components/Navbar\"\nimport UserList from \"../components/UserList\"\nimport UserModal from \"../components/UserModal\"\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\n\nfunction UserManagement() {\n  const [users, setUsers] = useState([])\n  const [filteredUsers, setFilteredUsers] = useState([])\n  const [selectedUser, setSelectedUser] = useState(null)\n  const [isModalOpen, setIsModalOpen] = useState(false)\n  const [searchTerm, setSearchTerm] = useState(\"\")\n\n  useEffect(() => {\n    fetchUsers()\n  }, [])\n\n  const fetchUsers = async () => {\n    try {\n      const response = await fetch(\"http://localhost/sistema-cadastro-cliente/backend/listar\")\n      if (!response.ok) throw new Error(\"Erro ao carregar usuários\")\n      const data = await response.json()\n      setUsers(data.data)\n      setFilteredUsers(data.data)\n    } catch (error) {\n      console.error(\"Erro ao buscar usuários:\", error)\n    }\n  }\n\n  const handleSearch = (term) => {\n    setSearchTerm(term)\n    const filtered = users.filter(\n      (user) =>\n        user.nome.toLowerCase().includes(term.toLowerCase()) || user.cpf.includes(term) || user.telefone.includes(term),\n    )\n    setFilteredUsers(filtered)\n  }\n\n  const handleUserSelect = (user) => {\n    setSelectedUser(user)\n    setIsModalOpen(true)\n  }\n\n  const handleCloseModal = () => {\n    setIsModalOpen(false)\n    setSelectedUser(null)\n  }\n\n  const handleSaveUser = async (updatedUser) => {\n    try {\n      const response = await fetch(`http://localhost/sistema-cadastro-cliente/backend/atualizar`, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify(updatedUser),\n      })\n      if (!response.ok) throw new Error(\"Erro ao atualizar usuário\")\n      const data = await response.json()\n      if (data.success) {\n        setUsers(users.map((user) => (user.id === updatedUser.id ? updatedUser : user)))\n        setFilteredUsers(filteredUsers.map((user) => (user.id === updatedUser.id ? updatedUser : user)))\n        handleCloseModal()\n      }\n    } catch (error) {\n      console.error(\"Erro ao atualizar usuário:\", error)\n    }\n  }\n\n  const handleDeleteUser = async (userId) => {\n    try {\n      const response = await fetch(`http://localhost/sistema-cadastro-cliente/backend/excluir`, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify({ id: userId }),\n      })\n      if (!response.ok) throw new Error(\"Erro ao excluir usuário\")\n      const data = await response.json()\n      if (data.success) {\n        setUsers(users.filter((user) => user.id !== userId))\n        setFilteredUsers(filteredUsers.filter((user) => user.id !== userId))\n        handleCloseModal()\n      }\n    } catch (error) {\n      console.error(\"Erro ao excluir usuário:\", error)\n    }\n  }\n\n  return (\n    <div className=\"user-management\">\n      <Navbar onSearch={handleSearch} />\n      <main className=\"main-content\">\n        <UserList users={filteredUsers} onUserSelect={handleUserSelect} />\n        {isModalOpen && (\n          <UserModal\n            user={selectedUser}\n            onClose={handleCloseModal}\n            onSave={handleSaveUser}\n            onDelete={handleDeleteUser}\n          />\n        )}\n      </main>\n    </div>\n  )\n}\n\nexport default UserManagement\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}